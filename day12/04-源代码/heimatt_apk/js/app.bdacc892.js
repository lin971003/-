(function(t){function e(e){for(var a,s,o=e[0],c=e[1],l=e[2],m=0,d=[];m<o.length;m++)s=o[m],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&d.push(r[s][0]),r[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(d.length)d.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,o=1;o<n.length;o++){var c=n[o];0!==r[c]&&(a=!1)}a&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},r={app:0},i=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1:function(t,e){},"16b2":function(t,e,n){},"181e":function(t,e,n){},"18fc":function(t,e,n){"use strict";var a=n("556b"),r=n.n(a);r.a},"263d":function(t,e,n){},"273c":function(t,e,n){},"2b0d":function(t,e,n){},"3e06":function(t,e,n){"use strict";var a=n("2b0d"),r=n.n(a);r.a},4450:function(t,e,n){"use strict";var a=n("181e"),r=n.n(a);r.a},"50a4":function(t,e,n){},"556b":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=n("b970"),i=n("343b"),s=(n("157a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("router-view")],1)}),o=[],c={},l=c,u=n("2877"),m=Object(u["a"])(l,s,o,!1,null,null,null),d=m.exports,h=n("8c4f"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",[t._v("使用 vant 中的组件")]),n("h3",[t._v("01 使用 vant 中的按钮")]),n("van-button",{attrs:{type:"default"}},[t._v("默认按钮")]),n("van-button",{attrs:{type:"primary"}},[t._v("主要按钮")]),n("van-button",{attrs:{type:"info"}},[t._v("信息按钮")]),n("van-button",{attrs:{type:"warning"}},[t._v("警告按钮")]),n("van-button",{attrs:{type:"danger"}},[t._v("危险按钮")]),n("h3",[t._v("02 使用 vant 中的 icon")]),n("van-icon",{attrs:{name:"close"}}),n("van-icon",{attrs:{name:"like"}}),n("h3",[t._v("03 使用 vant 中的 cell")]),n("van-cell-group",[n("van-cell",{attrs:{title:"单元格",value:"内容"}}),n("van-cell",{attrs:{icon:"like"}},[n("template",{slot:"title"},[t._v(" 左侧的内容 "),n("van-icon",{attrs:{name:"like"}})],1),n("template",{slot:"default"},[t._v(" 我是右侧的内容 ")]),n("template",{slot:"label"},[t._v(" 我是下方的内容 ")])],2)],1),n("h3",[t._v("04 使用 fields 中的 error-message 属性")]),n("van-field",{attrs:{label:"手机号",placeholder:"请输入手机号","error-message":t.errmsg},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}}),n("h3",[t._v("05 给添加加载效果")]),n("van-button",{attrs:{loading:t.isLoading,"loading-type":"spinner"},on:{click:function(e){t.isLoading=!0}}},[t._v("登录中")])],1)},v=[],p={name:"hahaha",data:function(){return{phone:"",errmsg:"不合法",isLoading:!1}}},g=p,b=Object(u["a"])(g,f,v,!1,null,null,null),k=b.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("van-nav-bar",{staticClass:"mynavbar"},[n("template",{slot:"title"},[n("div",{staticClass:"myword"},[t._v("登录")])])],2),n("van-cell-group",[n("van-field",{attrs:{clearable:"",placeholder:"请输入手机号","error-message":t.yanzheng.mobile},model:{value:t.user.mobile,callback:function(e){t.$set(t.user,"mobile",e)},expression:"user.mobile"}},[n("template",{slot:"left-icon"},[n("i",{staticClass:"iconfont icon-iphone"})])],2),n("van-field",{attrs:{"left-icon":"contact",placeholder:"请输入验证码","error-message":t.yanzheng.code},model:{value:t.user.code,callback:function(e){t.$set(t.user,"code",e)},expression:"user.code"}},[n("template",{slot:"left-icon"},[n("i",{staticClass:"iconfont icon-lock"})]),n("van-button",{staticClass:"mycodebtn",attrs:{slot:"button",size:"small"},slot:"button"},[t._v("获取验证码")])],2)],1),n("div",{staticClass:"myloginbtn"},[n("van-button",{staticClass:"mybtn",attrs:{loading:t.isLoading,size:"large"},on:{click:t.login}},[t._v("登录")])],1)],1)},w=[],y=(n("498a"),n("96cf"),n("1da1")),x=(n("b0c0"),n("d3b7"),n("bc3a")),C=n.n(x),L=n("2f62");function O(t,e){window.localStorage.setItem(t,JSON.stringify(e))}function j(t){return JSON.parse(window.localStorage.getItem(t))}function $(t){window.localStorage.removeItem(t)}a["a"].use(L["a"]);var R=new L["a"].Store({state:{user:j("userinfo")||{}},mutations:{setUser:function(t,e){t.user=e,O("userinfo",e)}}}),I=n("d604"),S=n.n(I),P=C.a.create({baseURL:"http://ttapi.research.itcast.cn/app/v1_0",transformResponse:[function(t){try{return S.a.parse(t)}catch(e){return JSON.parse(t)}}]}),z=C.a.create({baseURL:"http://ttapi.research.itcast.cn/app/v1_0"});P.interceptors.request.use((function(t){var e=R.state.user.token;return e&&(t.headers.authorization="Bearer ".concat(e)),t}),(function(t){return Promise.reject(t)})),P.interceptors.response.use((function(t){return t}),function(){var t=Object(y["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("----------------响应拦截器---------------------"),401!==e.response.status){t.next=10;break}if(n=R.state.user,!n||!n.refresh_token){t.next=10;break}return t.next=6,z({url:"/authorizations",method:"PUT",headers:{Authorization:"Bearer ".concat(n.refresh_token)}});case 6:return a=t.sent,n.token=a.data.data.token,R.commit("setUser",n),t.abrupt("return",P(e.config));case 10:return console.log("----------------响应拦截器---------------------"),t.abrupt("return",Promise.reject(e));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());var E=P;function T(t){var e=t.mobile,n=t.code;return E({url:"/authorizations",method:"POST",data:{mobile:e,code:n}})}function A(t){return E({url:"/user/blacklists",method:"POST",data:{target:t}})}function U(t){return E({url:"/user/followings",method:"POST",data:{target:t}})}function D(t){return E({url:"/user/followings/".concat(t),method:"DELETE"})}function q(){return E({url:"/user"})}function F(){return E({url:"/user/profile"})}function H(t){var e=t.name,n=t.gender,a=t.birthday,r=t.intro;return E({url:"/user/profile",method:"PATCH",data:{name:e,gender:n,birthday:a,intro:r}})}function J(t){var e=new FormData;return e.append("photo",t),E({url:"/user/photo",method:"PATCH",data:e})}var M={data:function(){return{user:{mobile:"13911111111",code:"246810"},yanzheng:{mobile:"",code:""},isLoading:!1}},methods:{login:function(){var t=this;this.checking()&&(this.isLoading=!0,setTimeout(Object(y["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T(t.user);case 3:n=e.sent,t.$store.commit("setUser",n.data.data),console.log(t.$store.state.user),a=t.$route.path,"/login"===a&&t.$router.push("/home"),"/checklogin"===a&&t.$router.back(),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),t.$toast.fail("失败文案");case 14:t.isLoading=!1;case 15:case"end":return e.stop()}}),e,null,[[0,11]])}))),1e3))},checking:function(){var t=!0,e=!0;return 11!==this.user.mobile.trim().length?(this.yanzheng.mobile="手机号不合法",t=!1):this.yanzheng.mobile="",6!==this.user.code.trim().length?(this.yanzheng.code="验证码不合法",e=!1):this.yanzheng.code="",t&&e}}},B=M,N=(n("3e06"),Object(u["a"])(B,_,w,!1,null,"790d1c96",null)),G=N.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("van-nav-bar",{staticClass:"mynavbar",attrs:{fixed:""}},[n("template",{slot:"title"},[n("div",{staticClass:"myword"},[t._v("首页")])])],2),n("van-tabs",{model:{value:t.activeChannels,callback:function(e){t.activeChannels=e},expression:"activeChannels"}},[t._l(t.channelList,(function(e,a){return n("van-tab",{key:a,attrs:{title:e.name}},[n("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:e.isLoading,callback:function(n){t.$set(e,"isLoading",n)},expression:"item.isLoading"}},[n("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:e.loading,callback:function(n){t.$set(e,"loading",n)},expression:"item.loading"}},t._l(e.articleList,(function(e,a){return n("van-cell",{key:a,staticClass:"article"},[n("template",{slot:"title"},[t._v(" "+t._s(e.title)+" "),e.cover.type>0?n("van-grid",{attrs:{border:!1,"column-num":3}},t._l(e.cover.images,(function(t,e){return n("van-grid-item",{key:e},[n("van-image",{attrs:{"lazy-load":"",src:t}})],1)})),1):t._e(),n("div",{staticClass:"message"},[n("div",{staticClass:"left"},[n("span",[t._v(t._s(e.aut_name))]),n("span",[t._v(t._s(e.comm_count)+"评论")]),n("span",[t._v(t._s(t._f("datafilter")(e.pubdate)))])]),n("div",{staticClass:"right",on:{click:function(n){return t.openmore(e.art_id,e.aut_id)}}},[n("van-icon",{attrs:{name:"cross"}})],1)])],1)],2)})),1)],1)],1)})),n("div",{staticClass:"menuicon"},[n("van-icon",{attrs:{name:"like"},on:{click:t.showPop}})],1)],2),n("mychannelpop",{attrs:{activeChannels:t.activeChannels,channelList:t.channelList},on:{"update:activeChannels":function(e){t.activeChannels=e},"update:active-channels":function(e){t.activeChannels=e}},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}}),n("more",{attrs:{artid:t.artid,autid:t.autid},on:{dislike:t.delArticle},model:{value:t.moreshow,callback:function(e){t.moreshow=e},expression:"moreshow"}})],1)},K=[],Q=(n("99af"),n("4160"),n("a434"),n("25f0"),n("159b"),n("2909"));function W(){return E({url:"/user/channels"})}function X(){return E({url:"/channels"})}function Y(t){return E({url:"/user/channels",method:"PUT",data:{channels:t}})}function Z(t){var e=t.channelid,n=t.timestamp;return E({url:"http://ttapi.research.itcast.cn/app/v1_1/articles",params:{channel_id:e,timestamp:n,with_top:0}})}function tt(t){return E({url:"/article/dislikes",method:"POST",data:{target:t}})}function et(t){var e=t.artid,n=t.type;return E({url:"/article/reports",method:"POST",data:{target:e,type:n,remark:""}})}function nt(t){var e=t.page,n=t.perpage,a=t.key;return E({url:"/search",method:"GET",params:{page:e,per_page:n,q:a}})}function at(t){return E({url:"/articles/".concat(t)})}function rt(t){return E({url:"/article/likings",method:"POST",data:{target:t}})}var it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-popup",{style:{height:"90%"},attrs:{value:t.value,position:"bottom"},on:{input:function(e){return t.$emit("input",e)}}},[n("van-cell",[n("template",{slot:"title"},[n("van-icon",{attrs:{name:"cross"},on:{click:function(e){return t.$emit("input",!1)}}})],1)],2),n("van-cell",{attrs:{title:"我的频道"}},[n("template",{slot:"default"},[!1===t.showIcon?n("van-button",{attrs:{plain:"",round:"",type:"danger",size:"mini"},on:{click:function(e){t.showIcon=!0}}},[t._v("编辑")]):t._e(),!0===t.showIcon?n("van-button",{attrs:{plain:"",round:"",type:"danger",size:"mini"},on:{click:function(e){t.showIcon=!1}}},[t._v("完成")]):t._e()],1)],2),n("van-grid",t._l(t.channelList,(function(e,a){return n("van-grid-item",{key:a,staticClass:"fatheritem"},[n("template",{slot:"text"},[n("div",{class:{active:a===t.activeChannels},on:{click:function(e){return t.changeChannel(a)}}},[t._v(" "+t._s(e.name)+" "),t.showIcon&&0!=a?n("van-icon",{staticClass:"sonicon",attrs:{name:"clear"},on:{click:function(e){return e.stopPropagation(),t.delChannel(a)}}}):t._e()],1)])],2)})),1),n("van-cell",{attrs:{title:"频道推荐"}}),n("van-grid",t._l(t.otherChannels,(function(e,a){return n("van-grid-item",{key:a,attrs:{text:e.name},on:{click:function(n){return t.addChannel(e)}}})})),1)],1)],1)},st=[],ot=(n("4de4"),n("c975"),n("d81d"),n("fb6a"),{props:["value","channelList","activeChannels"],data:function(){return{allChannels:[],showIcon:!1}},methods:{getAllChannels:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X();case 3:n=e.sent,t.allChannels=n.data.data.channels,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log("error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},addChannel:function(t){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function n(){var a,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.$set(t,"loading",!1),e.$set(t,"finished",!1),e.$set(t,"articleList",[]),e.$set(t,"isLoading",!1),e.$set(t,"timestamp",null),e.channelList.push(t),a=e.$store.state.user.token,!a){n.next=15;break}return r=e.channelList.slice(1).map((function(t,e){return{id:t.id,seq:e+2}})),n.next=11,Y(r);case 11:i=n.sent,console.log(i),n.next=16;break;case 15:O("channels",e.channelList);case 16:case"end":return n.stop()}}),n)})))()},delChannel:function(t){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.channelList.splice(t,1),a=e.$store.state.user.token,!a){n.next=8;break}return r=e.channelList.slice(1).map((function(t,e){return{id:t.id,seq:e+2}})),n.next=6,Y(r);case 6:n.next=9;break;case 8:O("channels",e.channelList);case 9:case"end":return n.stop()}}),n)})))()},changeChannel:function(t){this.$emit("update:activeChannels",t)}},computed:{otherChannels:function(){var t=this.channelList.map((function(t){return t.id})),e=this.allChannels.filter((function(e){return-1===t.indexOf(e.id)}));return e}},created:function(){this.getAllChannels()}}),ct=ot,lt=(n("5efe"),Object(u["a"])(ct,it,st,!1,null,"e512e574",null)),ut=lt.exports,mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-dialog",{attrs:{value:t.value,showConfirmButton:!1}},[!1===t.isReport?n("van-cell-group",[n("van-cell",{on:{click:function(e){return t.$emit("input",!1)}}},[n("template",{slot:"title"},[n("van-icon",{attrs:{name:"cross"}})],1)],2),n("van-cell",{attrs:{icon:"send-gift-o",title:"不感兴趣"},on:{click:t.dislike}}),n("van-cell",{attrs:{icon:"info-o",title:"反馈垃圾内容","is-link":""},on:{click:t.report}}),n("van-cell",{attrs:{icon:"delete",title:"拉黑作者"},on:{click:t.blackList}})],1):t._e(),!0===t.isReport?n("van-cell-group",[n("van-cell",{attrs:{icon:"arrow-left"},on:{click:function(e){t.isReport=!1}}}),t._l(t.reportList,(function(e,a){return n("van-cell",{key:a,attrs:{title:e.name},on:{click:function(n){return t.reportArticle(e.id)}}})}))],2):t._e()],1)],1)},dt=[],ht={props:["value","artid","autid"],data:function(){return{reportList:[{id:0,name:"其他问题"},{id:1,name:"标题夸张"},{id:2,name:"低俗色情"},{id:3,name:"错别字多"},{id:4,name:"旧闻重复"},{id:5,name:"广告软文"},{id:6,name:"内容不实"},{id:7,name:"涉嫌违法犯罪"},{id:8,name:"侵权"}],isReport:!1}},methods:{dislike:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$emit("dislike",t.artid),e.prev=1,e.next=4,tt(t.artid);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](1),console.log(e.t0.message);case 9:t.$emit("input",!1);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})))()},report:function(){this.isReport=!0},reportArticle:function(t){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,et({artid:e.artid,type:t});case 3:n.next=8;break;case 5:n.prev=5,n.t0=n["catch"](0),console.log(n.t0.message);case 8:e.isReport=!1,e.$emit("input",!1),e.$toast("您的举报信息我们已经收到，会在3个工作日之内给您回复，请求耐心等候");case 11:case"end":return n.stop()}}),n,null,[[0,5]])})))()},blackList:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A(t.autid);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),console.log(e.t0.message);case 8:t.$emit("input",!1);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))()}}},ft=ht,vt=Object(u["a"])(ft,mt,dt,!1,null,null,null),pt=vt.exports,gt={data:function(){return{channelList:[],activeChannels:0,show:!1,moreshow:!1,artid:0,autid:0}},methods:{onLoad:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.channelList[t.activeChannels],a=n.id,e.next=4,Z({channelid:a,timestamp:n.timestamp?n.timestamp:Date.now()});case 4:r=e.sent,n.articleList=[].concat(Object(Q["a"])(n.articleList),Object(Q["a"])(r.data.data.results)),n.timestamp=r.data.data.pre_timestamp,0===r.data.data.results.length&&(n.finished=!0),n.loading=!1;case 9:case"end":return e.stop()}}),e)})))()},onRefresh:function(){var t=this.channelList[this.activeChannels];t.loading=!1,t.finished=!1,t.articleList=[],t.timestamp=null,t.isLoading=!1,this.onLoad()},getChannels:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){var n,a,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.$store.state.user,!n||!n.token){e.next=8;break}return e.next=4,W();case 4:a=e.sent,t.channelList=a.data.data.channels,e.next=17;break;case 8:if(r=j("channels"),!r){e.next=13;break}t.channelList=r,e.next=17;break;case 13:return e.next=15,W();case 15:i=e.sent,t.channelList=i.data.data.channels;case 17:t.setOtherPropToChannelList();case 18:case"end":return e.stop()}}),e)})))()},setOtherPropToChannelList:function(){var t=this;this.channelList.forEach((function(e){t.$set(e,"loading",!1),t.$set(e,"finished",!1),t.$set(e,"articleList",[]),t.$set(e,"isLoading",!1),t.$set(e,"timestamp",null)}))},showPop:function(){this.show=!0},openmore:function(t,e){this.artid=t.toString(),this.autid=e,this.moreshow=!0},delArticle:function(t){var e=this.channelList[this.activeChannels],n=e.articleList;n.forEach((function(e,a){e.art_id===t&&n.splice(a,1)}))}},created:function(){this.getChannels()},components:{mychannelpop:ut,more:pt}},bt=gt,kt=(n("62c0"),Object(u["a"])(bt,V,K,!1,null,"b64ab0c0",null)),_t=kt.exports,wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"message"},[n("div",{staticClass:"user"},[n("div",{staticClass:"img"},[n("img",{attrs:{src:t.userObj.photo,alt:""},on:{click:function(e){return t.$router.push("/userinfo")}}}),n("span",[t._v(t._s(t.userObj.name))])]),t._m(0)]),n("div",{staticClass:"shoucang"},[n("div",{staticClass:"dongtai"},[n("div",[t._v(t._s(t.userObj.art_count))]),n("div",[t._v("动态")])]),n("div",{staticClass:"gz"},[n("div",[t._v(t._s(t.userObj.follow_count))]),n("div",[t._v("关注")])]),n("div",{staticClass:"fans"},[n("div",[t._v(t._s(t.userObj.fans_count))]),n("div",[t._v("粉丝")])])])]),n("div",{staticClass:"noname"},[n("van-grid",{attrs:{"column-num":3}},[n("van-grid-item",{attrs:{icon:"star-o",text:"收藏"}}),n("van-grid-item",{attrs:{icon:"clock-o",text:"历史"}}),n("van-grid-item",{attrs:{icon:"records",text:"作品"}})],1)],1),n("van-cell-group",[n("van-cell",{attrs:{title:"消息通知","is-link":""}}),n("van-cell",{attrs:{title:"用户反馈","is-link":""}}),n("van-cell",{attrs:{title:"小智同学","is-link":""},on:{click:function(e){return t.$router.push("/zhi")}}})],1)],1)},yt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"time"},[n("div",[t._v("今日阅读")]),n("div",[t._v("17分钟")])])}],xt={data:function(){return{userObj:{}}},methods:{getUserIno:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:n=e.sent,t.userObj=n.data.data;case 4:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.getUserIno()}},Ct=xt,Lt=(n("fcb2"),Object(u["a"])(Ct,wt,yt,!1,null,"549d9f46",null)),Ot=Lt.exports,jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("router-view"),n("van-tabbar",{attrs:{route:""}},[n("van-tabbar-item",{attrs:{to:"/home",icon:"home-o"}},[t._v("主页")]),n("van-tabbar-item",{attrs:{to:"/search",icon:"search"}},[t._v("搜索")]),n("van-tabbar-item",{attrs:{icon:"friends-o"}},[t._v("视频")]),n("van-tabbar-item",{attrs:{to:"/my",icon:"setting-o"}},[t._v("我的")])],1)],1)},$t=[],Rt={},It=Rt,St=Object(u["a"])(It,jt,$t,!1,null,null,null),Pt=St.exports,zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-search",{attrs:{background:"#3296fa",placeholder:"请输入搜索关键词","show-action":""},on:{input:t.thinkFn,search:t.onSearch},model:{value:t.key,callback:function(e){t.key=e},expression:"key"}},[n("template",{slot:"action"},[n("div",{staticClass:"cancleBtn",on:{click:t.onCancel}},[t._v(" 取消 ")])])],2),t.thinkList.length>0?n("van-cell-group",t._l(t.thinkList,(function(e,a){return n("van-cell",{key:a,attrs:{icon:"search"},on:{click:function(n){return t.onSearch(e.item)}}},[n("template",{slot:"title"},[n("div",{domProps:{innerHTML:t._s(e.colorItem)}})])],2)})),1):n("van-cell-group",[n("van-cell",{attrs:{title:"搜索历史"}},[n("template",{slot:"right-icon"},[n("van-icon",{attrs:{name:"delete"},on:{click:t.delAll}})],1)],2),t._l(t.searchList,(function(e,a){return n("van-cell",{key:a,attrs:{icon:"search",title:e},on:{click:function(n){return t.onSearch(e)}}},[n("template",{slot:"right-icon"},[n("van-icon",{attrs:{name:"cross"},on:{click:function(e){return e.stopPropagation(),t.delHis(a)}}})],1)],2)}))],2)],1)},Et=[];n("a15b"),n("ac1f"),n("6062"),n("3ca3"),n("1276"),n("ddb0");function Tt(t){return E({url:"/suggestion",method:"GET",params:{q:t}})}var At={data:function(){return{key:"",thinkList:[],timer:null,searchList:j("history")||[]}},methods:{onSearch:function(t){this.searchList.unshift(t.trim()),this.searchList=Object(Q["a"])(new Set(this.searchList)),O("history",this.searchList),this.$router.push("/searchResult/".concat(t))},onCancel:function(){this.key="",this.thinkList=[]},thinkFn:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout(Object(y["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.key.trim().length){e.next=3;break}return t.thinkList=[],e.abrupt("return");case 3:return e.next=5,Tt(t.key);case 5:n=e.sent,t.thinkList=n.data.data.options,t.thinkList=t.thinkList.map((function(e){return{colorItem:e.split(t.key).join('<span style="color: red">'.concat(t.key,"</span>")),item:e}}));case 8:case"end":return e.stop()}}),e)}))),300)},delHis:function(t){this.searchList.splice(t,1),O("history",this.searchList)},delAll:function(){var t=this;this.$dialog.confirm({title:"警告",message:"是否清空搜索历史"}).then((function(){t.searchList=[],$("history")})).catch((function(){}))}}},Ut=At,Dt=(n("a1cd"),Object(u["a"])(Ut,zt,Et,!1,null,null,null)),qt=Dt.exports,Ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-nav-bar",{staticClass:"mynavbar",attrs:{"left-arrow":""},on:{"click-left":t.onClickLeft}},[n("template",{slot:"title"},[n("div",{staticClass:"myword"},[t._v("搜索结果")])])],2),n("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.searchList,(function(e,a){return n("van-cell",{key:a,on:{click:function(n){return t.toDetail(e.art_id)}}},[n("template",{slot:"title"},[n("h3",[t._v(t._s(e.title))]),e.cover.type>0?n("van-grid",{attrs:{border:!1,"column-num":3}},t._l(e.cover.images,(function(t,e){return n("van-grid-item",{key:e},[n("van-image",{attrs:{src:t}})],1)})),1):t._e(),n("div",{staticClass:"msg"},[n("span",[t._v(t._s(e.aut_name))]),n("span",[t._v(t._s(e.comm_count)+" 评论")]),n("span",[t._v(t._s(t._f("datafilter")(e.pubdate)))])]),n("van-grid",{attrs:{"column-num":3}},[n("van-grid-item",[n("template",{slot:"text"},[n("div",{staticClass:"mybxo"},[n("van-icon",{attrs:{name:"comment-o"},on:{click:t.comment}}),t._v(" 评论 ")],1)])],2),n("van-grid-item",[n("template",{slot:"text"},[n("div",{staticClass:"mybxo"},[n("van-icon",{attrs:{name:"like-o"},on:{click:t.zan}}),t._v("点赞 ")],1)])],2),n("van-grid-item",[n("template",{slot:"text"},[n("div",{staticClass:"mybxo",on:{click:t.share}},[n("van-icon",{attrs:{name:"share"}}),t._v(" 分享 ")],1)])],2)],1)],1)],2)})),1)],1)],1)},Ht=[],Jt={data:function(){return{loading:!1,finished:!1,isLoading:!1,key:"",page:0,perpage:10,searchList:[],totalcount:0}},methods:{onLoad:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.page=t.page+1,e.next=3,nt({page:t.page,perpage:t.perpage,key:t.key});case 3:n=e.sent,t.searchList=[].concat(Object(Q["a"])(t.searchList),Object(Q["a"])(n.data.data.results)),t.totalcount=n.data.data.total_count,t.searchList.length===t.totalcount&&(t.finished=!0),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()},onRefresh:function(){this.loading=!1,this.finished=!1,this.page=0,this.searchList=[],this.totalcount=0,this.isLoading=!1,this.onLoad()},onClickLeft:function(){this.$router.back()},comment:function(){var t=this.$store.state.user;t.token?console.log("评论啦"):this.$router.push("/login")},zan:function(){this.$login()&&console.log("点赞")},share:function(){this.$login()&&console.log("分享")},toDetail:function(t){this.$router.push("/detail/".concat(t))}},created:function(){this.key=this.$route.params.key}},Mt=Jt,Bt=(n("8b99"),Object(u["a"])(Mt,Ft,Ht,!1,null,null,null)),Nt=Bt.exports,Gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"detail"},[n("van-nav-bar",{staticClass:"mynavbar",attrs:{"left-arrow":""},on:{"click-left":function(e){return t.$router.back()}}},[n("template",{slot:"title"},[n("div",{staticClass:"myword"},[t._v(" "+t._s(t.detailObj.title)+" ")])])],2),n("h1",{staticClass:"title"},[t._v(" "+t._s(t.detailObj.title)+" ")]),n("van-cell",[n("template",{slot:"title"},[n("div",{staticClass:"box"},[n("div",{staticClass:"img"},[n("img",{attrs:{src:t.detailObj.aut_photo,alt:""}})]),n("div",{staticClass:"msg"},[n("div",[t._v(t._s(t.detailObj.aut_name))]),n("div",[t._v(t._s(t._f("datafilter")(t.detailObj.pubdate)))])]),n("div",{staticClass:"follorw"},[!1===t.detailObj.is_followed?n("van-button",{attrs:{type:"info"},on:{click:t.follow}},[t._v("+ 关注")]):t._e(),!0===t.detailObj.is_followed?n("van-button",{attrs:{type:"info"},on:{click:t.unfollow}},[t._v("已关注")]):t._e()],1)])])],2),n("van-cell",[n("template",{slot:"title"},[n("div",{domProps:{innerHTML:t._s(t.detailObj.content)}})])],2),n("div",{staticClass:"btnbox"},[n("van-button",{staticClass:"mybtn",attrs:{round:"",plain:"",type:1===t.detailObj.attitude?"danger":"default"},on:{click:t.zan}},[n("van-icon",{attrs:{name:"like-o"}}),t._v("点赞 ")],1),n("van-button",{staticClass:"mybtn",attrs:{round:"",plain:"",type:0===t.detailObj.attitude?"danger":"default"},on:{click:t.dislike}},[n("van-icon",{attrs:{name:"delete"}}),t._v("不喜欢 ")],1)],1),n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.commentList,(function(e,a){return n("comment",{key:a,attrs:{iscomment:!0,commentItem:e},on:{openreply:t.openreply}})})),1),n("write",{attrs:{isComment:!0,artid:t.artid},on:{addComment:t.addComment}}),n("reply",{attrs:{artid:t.artid},model:{value:t.replyshow,callback:function(e){t.replyshow=e},expression:"replyshow"}})],1)},Vt=[],Kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment"},[n("van-cell",[n("template",{slot:"title"},[n("div",{staticClass:"mybox"},[n("div",{staticClass:"img"},[n("img",{attrs:{src:t.commentItem.aut_photo,alt:""}})]),n("div",{staticClass:"msg"},[n("div",[t._v(t._s(t.commentItem.aut_name))]),n("div",[t._v(t._s(t.commentItem.content))]),n("div",[n("span",[t._v(t._s(t._f("datafilter")(t.commentItem.pubdate)))]),t.iscomment?n("van-button",{staticClass:"myreply",attrs:{size:"mini",round:"",type:"danger"},on:{click:t.openreply}},[t._v("回复 "+t._s(t.commentItem.reply_count))]):t._e()],1)]),n("div",{staticClass:"follorw"},[n("van-icon",{attrs:{name:"like"}}),t._v(" "+t._s(t.commentItem.like_count)+" ")],1)])])],2)],1)},Qt=[],Wt=new a["a"],Xt={props:["commentItem","iscomment"],methods:{openreply:function(){this.$emit("openreply",!0),Wt.$emit("passitem",this.commentItem)}}},Yt=Xt,Zt=(n("4450"),Object(u["a"])(Yt,Kt,Qt,!1,null,"47459efa",null)),te=Zt.exports,ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"write"},[n("van-search",{attrs:{placeholder:"写评论","show-action":"",shape:"round"},on:{search:t.writeCommit},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[n("div",{attrs:{slot:"action"},on:{click:t.writeCommit},slot:"action"},[t._v("发表")])])],1)},ne=[];function ae(t){var e=t.artid,n=t.offset,a=t.limit;return E({url:"comments",params:{type:"a",source:e,offset:n,limit:a}})}function re(t){var e=t.artid,n=t.content;return E({url:"/comments",method:"POST",data:{target:e,content:n}})}function ie(t){var e=t.commid,n=t.offset,a=t.limit;return E({url:"/comments",method:"GET",params:{type:"c",source:e,offset:n,limit:a}})}function se(t){var e=t.commid,n=t.content,a=t.artid;return E({url:"/comments",method:"POST",data:{target:e,content:n,art_id:a}})}var oe={props:["artid","isComment","commid"],data:function(){return{value:""}},methods:{writeCommit:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){var n,a,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==t.isComment){e.next=9;break}return e.next=3,re({artid:t.artid,content:t.value});case 3:n=e.sent,a=n.data.data.new_obj,t.$emit("addComment",a),t.value="",e.next=14;break;case 9:return e.next=11,se({commid:t.commid.toString(),content:t.value,artid:t.artid});case 11:r=e.sent,i=r.data.data.new_obj,t.$emit("addComment",i);case 14:case"end":return e.stop()}}),e)})))()}}},ce=oe,le=(n("18fc"),Object(u["a"])(ce,ee,ne,!1,null,null,null)),ue=le.exports,me=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-popup",{style:{height:"70%"},attrs:{value:t.value,position:"bottom"},on:{input:function(e){return t.$emit("input",!1)}}},[n("comment",{attrs:{iscomment:!1,commentItem:t.commentItem}}),n("van-cell",[n("template",{slot:"title"},[t._v(" 当前评论的回复 ")])],2),n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.replyList,(function(t,e){return n("comment",{key:e,attrs:{iscomment:!1,commentItem:t}})})),1),n("write",{attrs:{artid:t.artid,commid:t.commentItem.com_id,isComment:!1},on:{addComment:t.addComment}})],1)],1)},de=[],he={props:["value","artid"],data:function(){return{commentItem:{},loading:!1,finished:!1,offset:null,limit:10,replyList:[],endid:0}},methods:{onLoad:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ie({commid:t.commentItem.com_id.toString(),offset:t.offset,limit:t.limit});case 2:n=e.sent,t.replyList=[].concat(Object(Q["a"])(t.replyList),Object(Q["a"])(n.data.data.results)),t.endid=n.data.data.end_id,t.offset=n.data.data.last_id,t.offset===t.endid&&(t.finished=!0),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()},addComment:function(t){this.replyList.unshift(t),this.commentItem.reply_count=this.commentItem.reply_count+1}},created:function(){var t=this;Wt.$on("passitem",(function(e){t.commentItem=e,console.log(t.commentItem)}))},components:{comment:te,write:ue}},fe=he,ve=Object(u["a"])(fe,me,de,!1,null,null,null),pe=ve.exports,ge={data:function(){return{artid:0,detailObj:{},loading:!1,finished:!1,offset:null,limit:10,commentList:[],endid:0,replyshow:!1}},methods:{getDetail:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,at(t.artid);case 2:n=e.sent,t.detailObj=n.data.data;case 4:case"end":return e.stop()}}),e)})))()},follow:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.detailObj.aut_id,e.next=3,U(n);case 3:t.detailObj.is_followed=!0;case 4:case"end":return e.stop()}}),e)})))()},unfollow:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n=t.detailObj.aut_id,e.next=4,D(n);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.log(e.t0);case 9:t.detailObj.is_followed=!1;case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))()},zan:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,rt(t.artid);case 2:e.sent,t.detailObj.attitude=1;case 4:case"end":return e.stop()}}),e)})))()},dislike:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,tt(t.artid);case 2:t.detailObj.attitude=0;case 3:case"end":return e.stop()}}),e)})))()},onLoad:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ae({artid:t.artid,offset:t.offset,limit:t.limit});case 2:n=e.sent,t.commentList=[].concat(Object(Q["a"])(t.commentList),Object(Q["a"])(n.data.data.results)),t.endid=n.data.data.end_id,t.offset=n.data.data.last_id,t.offset===t.endid&&(t.finished=!0),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()},addComment:function(t){this.commentList.unshift(t)},openreply:function(t){this.replyshow=t}},components:{comment:te,write:ue,reply:pe},created:function(){this.artid=this.$route.params.artid,this.getDetail()}},be=ge,ke=(n("ac62"),Object(u["a"])(be,Gt,Vt,!1,null,null,null)),_e=ke.exports,we=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"userinfo"},[n("van-nav-bar",{staticClass:"mynavbar",attrs:{"left-arrow":"","right-text":"保存"},on:{"click-left":function(e){return t.$router.back()},"click-right":t.save}},[n("template",{slot:"title"},[n("div",{staticClass:"myword"},[t._v(" 个人信息 ")])])],2),n("van-cell-group",[n("van-cell",{attrs:{title:"头像","is-link":""},on:{click:t.showImgpop}},[n("template",{slot:"default"},[n("img",{staticClass:"myimg",attrs:{src:t.userInfo.photo,alt:""}})])],2),n("van-cell",{attrs:{title:"昵称","is-link":"",value:t.userInfo.name},on:{click:t.openName}}),n("van-cell",{attrs:{title:"介绍","is-link":"",value:t.userInfo.intro}})],1),n("van-cell-group",[n("van-cell",{attrs:{title:"性别","is-link":"",value:0===t.usermsg.gender?"男":"女"}}),n("van-cell",{attrs:{title:"生日","is-link":"",value:t.usermsg.birthday}})],1),n("van-popup",{style:{height:"7%"},attrs:{position:"bottom"},model:{value:t.nameshow,callback:function(e){t.nameshow=e},expression:"nameshow"}},[n("van-field",{attrs:{required:""},model:{value:t.userInfo.name,callback:function(e){t.$set(t.userInfo,"name",e)},expression:"userInfo.name"}})],1),n("van-popup",{model:{value:t.imgpopShow,callback:function(e){t.imgpopShow=e},expression:"imgpopShow"}},[n("div",{staticClass:"box"},[n("van-button",{staticClass:"mybtn",attrs:{size:"large"},on:{click:t.showimgselect}},[t._v("从相册中选择")])],1),n("input",{ref:"myfile",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.changeimg}}),n("div",[n("van-button",{staticClass:"mybtn",attrs:{size:"large"}},[t._v("拍照")])],1),n("div",[n("van-button",{staticClass:"mybtn",attrs:{size:"large"}},[t._v("取消")])],1)])],1)},ye=[],xe=n("28a2");a["a"].use(xe["a"]);var Ce={data:function(){return{userInfo:{},usermsg:{},nameshow:!1,imgpopShow:!1}},methods:{save:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H({name:t.userInfo.name,intro:t.userInfo.intro,gender:t.usermsg.gender,birthday:t.usermsg.birthday});case 3:t.$toast.success("修改用户信息成功"),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),t.$toast.fail("信息有误");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},getUserInfo:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:return n=e.sent,t.userInfo=n.data.data,e.next=6,F();case 6:a=e.sent,t.usermsg=a.data.data;case 8:case"end":return e.stop()}}),e)})))()},openName:function(){this.nameshow=!0},showImgpop:function(){this.imgpopShow=!0},showimgselect:function(){var t=this.$refs.myfile;t.click()},changeimg:function(){var t=this,e=this.$refs.myfile.files[0],n=new FileReader;n.readAsDataURL(e),n.addEventListener("load",(function(){Object(xe["a"])({images:[n.result],onClose:function(){t.setProfile()}})}))},setProfile:function(){var t=this;this.imgpopShow=!1,this.$dialog.confirm({title:"提示",message:"是否将当前图片设置为头像"}).then(Object(y["a"])(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$refs.myfile.files[0],e.next=3,J(n);case 3:a=e.sent,r=a.data.data.photo,t.userInfo.photo=r;case 6:case"end":return e.stop()}}),e)})))).catch((function(){console.log("取消")}))}},mounted:function(){this.getUserInfo()}},Le=Ce,Oe=(n("5b81"),Object(u["a"])(Le,we,ye,!1,null,null,null)),je=Oe.exports,$e=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-nav-bar",{staticClass:"mynavbar",attrs:{"left-arrow":""},on:{"click-left":function(e){return t.$router.back()}}},[n("template",{slot:"title"},[n("div",{staticClass:"myword"},[t._v("小智同学")])])],2),n("div",{staticClass:"chat"},t._l(t.chatArr,(function(e,a){return n("div",{key:a,staticClass:"item",class:"robot"===e.flag?"roboto":"user"},[n("img",{attrs:{src:"https://dss1.bdstatic.com/6OF1bjeh1BF3odCf/it/u=1325043162,891607995&fm=74&app=80&f=JPEG&size=f121,140?sec=1880279984&t=b9267fdaa2327fc03b3128ba82d601e9",alt:""}}),n("div",{staticClass:"word"},[t._v(t._s(e.msg))])])})),0),n("div",{staticClass:"write"},[n("van-search",{attrs:{placeholder:"写评论","show-action":"",shape:"round"},on:{search:t.writeCommit},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[n("div",{attrs:{slot:"action"},on:{click:t.writeCommit},slot:"action"},[t._v("发表")])])],1)],1)},Re=[],Ie=n("8055"),Se=n.n(Ie),Pe={data:function(){return{socket:null,value:"",chatArr:[{flag:"robot",msg:"你好啊，见到你很开心"}]}},methods:{writeCommit:function(){this.socket.emit("message",{msg:this.value,timestamp:Date.now()}),this.chatArr.push({flag:"user",msg:this.value}),this.value=""}},created:function(){var t=this;this.socket=Se()("http://ttapi.research.itcast.cn?token=".concat(this.$store.state.user.token)),this.socket.on("message",(function(e){t.chatArr.push({flag:"robot",msg:e.msg})}))}},ze=Pe,Ee=(n("fd63"),Object(u["a"])(ze,$e,Re,!1,null,null,null)),Te=Ee.exports;a["a"].use(h["a"]);var Ae=new h["a"]({routes:[{path:"/",name:"login",component:G},{path:"/UserVant",name:"UserVant",component:k},{path:"/login",name:"login",component:G},{path:"/checklogin",component:G},{path:"/layout",component:Pt,children:[{path:"/home",component:_t},{path:"/my",component:Ot},{path:"/search",component:qt}]},{path:"/searchResult/:key",component:Nt},{path:"/detail/:artid",component:_e},{path:"/userinfo",component:je},{path:"/zhi",component:Te}]}),Ue=(n("16b2"),n("5a0c")),De=n.n(Ue),qe=n("4208"),Fe=n.n(qe);n("a471");De.a.extend(Fe.a),De.a.locale("zh-cn"),a["a"].filter("datafilter",(function(t){return De()().from(De()(t))}));var He={install:function(t){t.prototype.$login=function(){var t=R.state.user;return!!t.token||(Ae.push("/checklogin"),!1)}}},Je=He;a["a"].use(r["a"]),a["a"].use(i["a"]),a["a"].use(Je),a["a"].config.productionTip=!1,new a["a"]({router:Ae,store:R,render:function(t){return t(d)}}).$mount("#app")},"5b81":function(t,e,n){"use strict";var a=n("273c"),r=n.n(a);r.a},"5efe":function(t,e,n){"use strict";var a=n("91f1"),r=n.n(a);r.a},"5f35":function(t,e,n){},"62c0":function(t,e,n){"use strict";var a=n("7e75"),r=n.n(a);r.a},6645:function(t,e,n){},"7e75":function(t,e,n){},"8b99":function(t,e,n){"use strict";var a=n("50a4"),r=n.n(a);r.a},"91f1":function(t,e,n){},a1cd:function(t,e,n){"use strict";var a=n("e6ab"),r=n.n(a);r.a},ac62:function(t,e,n){"use strict";var a=n("263d"),r=n.n(a);r.a},e6ab:function(t,e,n){},fcb2:function(t,e,n){"use strict";var a=n("5f35"),r=n.n(a);r.a},fd63:function(t,e,n){"use strict";var a=n("6645"),r=n.n(a);r.a}});
//# sourceMappingURL=app.bdacc892.js.map