



## v-model与组件

[自定义组件的v-model](https://cn.vuejs.org/v2/guide/components-custom-events.html#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E7%9A%84-v-model)

v-model是语法糖，相当于：

```html
<input v-model="message" />
// 转换后：
<input
  v-bind:value="message"
  v-on:input="message=$event.target.value">
```

v-model与组件

1. 隐式添加 value 的 prop，子组件通过 props.value 接收值

2. 子组件通过 this.$emit('input')，改变父组件 v-model 绑定的值

3. v-model同样相当于语法糖

4. 在子组件里面可以定制value和input

   ```js
    model: {
       prop: 'info',
       event: 'update'
     },
   ```

   

   ```html
   <child v-model="msg"></child>
   // 转换后
   <child v-bind:value="msg"
         v-on:input="msg = arguments[0]"></child>
   ```



## 

## Vue组件的单元测试

提问：写好一个组件，如何保证组件功能是OK的？让使用者点点？？

​	1. 把组件的功能包含在单元测试里面，检查和验证组件功能

是什么？Vue组件检查和验证

有什么用？保证自己写的组件功能是完整的，特别是提供组件给别人使用

怎么用？vue-cli有[Jest](https://github.com/facebook/jest) 或 [Mocha](https://mochajs.org/) 进行单元测试的内置选项

1. vue create时，选择定制，选择单元测试的解决方案
2. 在已有的vue cli项目里面添加单元测试功能。 `vue add @vue/unit-jest`
3. npm run test:unit会运行test/unit目录下所有*.spec.js测试用例

#### Vue Test Unit的使用

[传送门](https://vue-test-utils.vuejs.org/zh/guides/#%E8%B5%B7%E6%AD%A5)

1. 计数器
2. 计数器测试用例
   1. 初次数字显示
   2. 点+时，数字+1

## Fiddler使用

![image-20191202165556863](assets/image-20191202165556863.png)

1. 基本使用，选择请求，查看请求详细信息（抓包）

2. fiddler配置抓包chrome(包括http和https请求)

   1. 官网下载fiddler

   2. fiddlercertmaker.exe用来生成证书

   3. fiddler https和connections配置

      ![image-20200102162005746](assets/image-20200102162005746.png)

      ![image-20200102162029404](assets/image-20200102162029404.png)

   4. 导出证书到桌面

   5. chrome导入证书

3. fiddler抓包手机端

   1. 安卓  https://www.jianshu.com/p/724097741bdf 
   2. ios  https://www.jianshu.com/p/724097741bdf 
   3. 大致的步骤
      1. filddler所在的电脑和手机在同一个局域网内
      2. 在手机上访问 `电脑ip:8888`可以下载证书
      3. 手机上安装证书
      4. 手机wifi设置代理为电脑ip：8888



## 前端性能优化

1. 适当减少HTTP请求
   1. css/js合并打包
   2. HTTP请求合并
   3. 小图标用iconfont或者base64
   4. 雪碧图可维护性不好
2. 减少静态资源的体积
   1. js,css,图片压缩，图片压缩用tinypng.com
   2. 先经过tinypng压缩
3. 服务器端开启gzip
   1. 后端或者运维做的
4. 预加载
   1. 利用浏览器空闲时间加载资源
5. 静态资源放CDN
6. 请求缓存，查询缓存
7. 设置合适的HTTP缓存
   1. 请求带宽
   2. 请求速度
   3. 运维或者后端
8. 其他
   1. 减少dom数量（小程序，weex, RN）
   2. css预处理器，减少层级,小于3~4层
   3. 图片懒加载，Vue-lazyload
   4. 图片设置宽高，<img alt>
      1. 重排
   5. 默认图片设置
   6. 接口请求的容错

面试要举实际的例子

1. [路由懒加载](https://router.vuejs.org/zh/guide/advanced/lazy-loading.html#%E6%8A%8A%E7%BB%84%E4%BB%B6%E6%8C%89%E7%BB%84%E5%88%86%E5%9D%97)
   1. 首屏加载速度增快



#### webpack proxy配置跨域



1. 希望老师复习下面试常问到的,闭包,递归,原型,这些问题几乎必问的了,还有那个vue的生命周期勾子

1. 闭包就函数里面包含函数，内部函数可以访问到外部函数的变量。

   1. 一般用法是在函数里面返回函数，令到外层函数外部可以访问到函数内部的变量

   ```js
   // 创建闭包最常见的方式函数作为返回值
   function foo() {
     var name = "kebi";
     return function() {
       console.log(name);
     };
   }
   var bar = foo();
   bar(); //打印kebi    --外部函数访问内部变量
   ```

2. 原型与原型链

   1. 访问一个对象的属性，如果对象上没有，就会从对象的原型上找，如果找不到，就会去到对象的原型的原型上找，一直找到Object的原型。
   2. 我们项目里面用原型的知识，把axios设置给Vue.prototype，这样不用在每个页面去导入axios

3. Vue生命周期钩子有10个。比较常用的是created和mounted, created最早获取data属性，一般在这里发请求，初始化页面。mounted最早获取到渲染后的dom，一般第三方插件如iscroll初始化放在mounted

   - beforeCreate
   - created
   - beforeMount
   - mounted
   - beforeUpdate
   - updated
   - activated
   - deactivated
   - beforeDestroy
   - destroyed
     -  用于组件销毁时清除定时器等





1. 如何解决跨域? 

2. ```
   src :http://vip.m.fenqile.com?callback=func
   function func(data){
   	console.log(data)
   }
   后端:func(JSON.stringify({name:'joven'}))
   ```

   

   1.   JSONP
        1.   GET
        2.   不安全
        3.   现在已经不用了，但是它的原理需要掌握
   2.   服务器代理
        1.   A访问C代理服务器，C代代替A访问B
        2.   webpack proxy
        3.   后端服务器nginx 
        4.   一般用来解决开发时的跨域问题
        5.   用fildder
        6.   用来开发的方案
   3.   CORS
        1.   后端请求头
        2.   注意带cookie需要配配置信任
        3.   一般线上方案
        4.   后端配置

## 前端性能优化

1. 减少HTTP请求
   1. css/jsr合并打包
   2. 小图标用iconfont或者base64

2. 减少静态资源的体积
   1. js,css,图片压缩，图片压缩用tinypng.com
3. 服务器端开启gzip
4. 预加载
   1. 利用浏览器空闲时间加载资源
5. 静态资料放CDN
6. 请求缓存
7. 设置合适的缓存
8. 其他
   1. 减少dom数量
   2. css预处理器，减少层级

> 1. 减少HTTP请求，也不是HTTP请求越少越好。比如有的页面是一个就是由一个请求数据渲染的，至少可以拆成两个请求，先让页面出来一部分，另一部分异步加载。
> 2. weppack url-loader设置limit参数，可以自动将较小的图片生成base64图片
> 3. 雪碧图：把小图标合并成一个大的图片，然后用背景定位。由于维护起来很麻烦，不建议使用。
> 4. tinypng的压缩效率比webpack的插件高，建议总是把图片放在tinypng上压缩。





## 面向对象，封装继承多态

1. 面向对象是封装函数更高维高的封装，把方法和属性封装到一起。可以理解成二维和三维不一样。
2. 多态是同一行为对于不同对象不一样。Player1坦克和敌人坦克的move方法不一样。
3. 继承比如敌我坦克都有发射功能，可以封装一个坦克基类，那么敌我坦克就是继承自基类



1. webpack怎么优化压缩代码呢. 你打包后的代码最大多大,我回答4/5m 面试官反应 这么大吗

   1. 读文件，输入文件，理了一下文件依赖顺序，中间有压缩代码。
   2. 尽量小于200kb
   3. webpack分包策略（chunk）
   4. mpvue的学习中会涉及部分webpack配置

2. websoket git

3. 闭包的应用场景 webpack搭建流程重点 简单说下

   1. 变量的私有作用域

      ```js
      function Counter(){
          var num = 0
          this.add = function(){
              num++
          }
          this.getNum = function(){
              return num
          }
      }
      
      let counter = new Counter()
      
      counter.add()
      counter.add()
      console.log(counter.getNum())
      ```

   2. webpack搭建流程

      1. 单入口SPA还是多入口MPA
         1. entry
      2. 网上搜索一下对应的配置，根据业务场景定制
         1. output path,publicPath

## 响应式布局

 https://juejin.im/post/5caaa230e51d452b672f9703 





说说你的对HTTP的理解吧

1. http是客户端和服务器端通信的功议
2. http方法
   1. get查询
   2. post更新
   3. put新增
   4. delete删除
3. http状态码
   1. 2xx成功
   2. 3xx重定向
      1. 301 永久重定向
      2. 302 临时重定向
4. 304 命中协商缓存
   3. 4xx客户端错误
      1. 400 bad request
      2. 403
      3. 401
      4. 404 not found
   4. 5xx服务端错误
      1. 502 bad gateway
      2. 503 forbidden





## React和Vue对比

[传送门](https://juejin.im/post/5dad09be518825393e52d1bd)

1. 语法

   1. vue单文件组件.vue格式，保留了html/css/js分离的写法，更接近常用的web开发方式，容易上手。
   2. react用jsx，html和css全写进js里面。学习使用起来有一定成本

2. 数据绑定

   1. vue是实现了双向数据绑定的mvvm框架，当视图改变更新模型层，当模型层改变更新视图层。在vue中，使用了双向绑定技术，就是View的变化能实时让Model发生变化，而Model的变化也能实时更新到View。

      Vue采用数据劫持&发布-订阅模式的方式，vue在创建vm的时候，会将数据配置在实例当中，然后通过Object.defineProperty对数据进行操作，为数据动态添加了getter与setter方法，当获取数据的时候会触发对应的getter方法，当设置数据的时候会触发对应的setter方法，从而进一步触发vm的watcher方法，然后数据更改，vm则会进一步触发视图更新操作。

      1. 大家去掘金看看如何实现简洁版本的vue

   2. react,大概是事件冒泡

3. 都有虚拟DOM

4. 指令, react没有for指令，需要用到map

5. 性能优化：React需要重写shouldComponentUpdate来避免不必要的dom操作 

   1. vue里面用this.$nextTick

6. App开发

   1. Weex基于Vue语法
   2. React Native基于React
      1. RN比weex更优秀





## 小程序云开发简介

小程序的后端服务器，帮助开发者快速搭建后端服务。开发语言是Node.js

提供的功能：

1. 云函数
   1. 获取appid等鉴权信息
   2. 更容易完成登录和支付
2. 云数据库
   1. mangodb
   2. 数据的增删改查
3. 云存储
   1. 管理文件

特点：

1. 不管考虑服务器，运维，域名等等
2. 免费2GB数据库和5GB的文件存储
3. 开发简单

原理：SeverLess无服务

	1. 不太需要维护的,可扩展的服务

      	2. 让开发者只需要关注自己的业务逻辑就行



## 小程序云开发开通

1. 新建项目云开发
   1. 不能使用测试账号
2. 微信开发者工具上点击云开发，确定 
3. 新建环境
   1. 每个小程序账号可以免费创建两个环境，建议开发环境(测试环境)和生产环境
   2. 基础版是免费的，完全可以满足开发

4. 云开发控制台
   1. 运营分析
   2. 可以再创建一个环境

5. miniprogram是前端代码，cloudfunctions是云后台代码



## 云数据库

[传送门](https://developers.weixin.qq.com/miniprogram/dev/wxcloud/basis/capabilities.html#%E6%95%B0%E6%8D%AE%E5%BA%93)

​	云开发提供了一个JSON数据库（mongoDB），提供2GB免费存储空间。

集合里面每条记录都是一个JSON格式的对象，可以理解为一个JSON数组

使用方法：

1. 创建一个集合`user`，添加记录

   1. 导出，可以看到JSON数据集合

2. 插入一行

   1. 返回_id是唯一标识

   ```js
   db.collection('user').add({
       data: {
           name: 'Joven2',
           age: 28
       }
   }).then(res=>{
       console.log(res)
   })
   ```

3. 查找

   1. 查找某一行记录
   2. 查找多个记录

   ```js
   db.collection('user').doc('953037125dd725ef01fdb3fa34a391d0').get().then(res=>{
       console.log(res)
   })
   
   db.collection('user').where({
       name: 'Joven1'
   }).get().then(res=>{
       console.log(res)
   })
   ```

4. 更新一行

   1. doc后面指定是_id

   ```js
   updateRow(){
       db.collection('user').doc('953037125dd725ef01fdb3fa34a391d0').update({
           data:{
               age: 100
           }
       }).then(res=>{
           console.log(res)
       })
   },
   ```

5. 手动插入的数据没有_openid，权限的作用

6. 删除一行

   ```js
   db.collection('user').doc('953037125dd725ef01fdb3fa34a391d0').
       remove().then(res=>{
         console.log(res)
       })
   ```

> 给前端操作数据库的逻辑



## 云函数

小程序运行的后端代码。

1. 安装Nodejs环境

2. 新建云函数sum,在index.js

   ```js
   exports.main = async (event, context) => {
    return{
      sum:event.a+event.b
    }
   }
   ```

3. 在小程序前端的代码里面

   ```js
   wx.cloud.callFunction({
       name:'sum',
       data:{
           a:2,
           b:3
       }
   }).then(res=>{
       console.log(res.result.sum)
   })
   ```

4. 调用login，获取登录信息



## 云存储

免费5GB的存储空间

一般用于存储图片

```JS
wx.cloud.uploadFile({
    cloudPath:'example.png',
    filePath:tempFilePaths[0],
}).then(res=>{
    // console.log(res)
})
```

